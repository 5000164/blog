<!DOCTYPE html>
<html lang="ja">
<head>
    <meta charset="UTF-8">
    <title>5000164 is here</title>
    <link rel="stylesheet" href="/css/main.css">
    <meta name="generator" content="Hugo 0.26" />
</head>
<body>
<header>
    <a href="http://blog.5000164.jp">5000164 is here</a>
</header>

<article>
    <h1>2014-11-14 Android 実機の SQLite ファイルをローカルに持ってくる</h1>
    

<h1 id="結論">結論</h1>

<pre><code>adb shell
run-as {パッケージ名} cat databases/{DB 名} &gt; /sdcard/{DB 名}
exit
adb pull /sdcard/{DB 名} ~/Downloads/{DB 名}
</code></pre>

<h1 id="解説">解説</h1>

<p>adb pull ではパッケージの権限がないため直接ファイルを取得できない<br />
なので run-as コマンドを使いパッケージの権限があるユーザーで adb pull できる領域にファイルをコピー<br />
Android は cp コマンドがないので cat コマンドの出力をリダイレクトして同じ内容のファイルを生成している<br />
ファイルが adb pull できる領域にコピーできたので adb pull</p>

<h1 id="あとはローカルで好きにできる">あとはローカルで好きにできる</h1>

<p>好きな GUI で簡単に見られる<br />
継続的に繰り返すのは大変だけど、手軽に見られるのは楽<br />
<a href="http://sqlitebrowser.org/">DB Browser for SQLite</a><br />
<a href="https://addons.mozilla.org/ja/firefox/addon/sqlite-manager/">SQLite Manager :: Add-ons for Firefox</a></p>

<h1 id="まとめ">まとめ</h1>

<pre><code>adb -d shell &quot;run-as {パッケージ名} cat databases/{DB 名} &gt; /sdcard/{DB 名}&quot;
adb pull /sdcard/{DB 名} ~/Downloads/{DB 名}
</code></pre>

<p>ってやれば 2 行でいけるかも知れないけど未検証</p>

<h1 id="参考">参考</h1>

<p><a href="http://kimihiro-n.appspot.com/show/275003">Android端末の開発中データベース(SQlite)を見る方法 #Pistatium</a><br />
<a href="http://to-developer.com/blog/?p=1111">[Android]実機デバッグでdata/dataに保存したファイルを取得する方法 | Memorandum blog</a></p>

</article>
<footer>
    SUGAWARA Hiroshi
</footer>


<script>
window.ga=window.ga||function(){(ga.q=ga.q||[]).push(arguments)};ga.l=+new Date;
ga('create', 'UA-51024599-1', 'auto');
ga('send', 'pageview');
</script>
<script async src='//www.google-analytics.com/analytics.js'></script>


</body>
</html>

