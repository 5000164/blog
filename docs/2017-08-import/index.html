<!DOCTYPE html>
<html lang="ja">
<head>
    
<script>
window.ga=window.ga||function(){(ga.q=ga.q||[]).push(arguments)};ga.l=+new Date;
ga('create', 'UA-51024599-1', 'auto');
ga('send', 'pageview');
</script>
<script async src='//www.google-analytics.com/analytics.js'></script>

    <meta charset="UTF-8">
    <meta name="viewport" content="width=640">
    <title>Jekyll の記事と WordPress の記事を Hugo にインポートする | 5000164 is here</title>
    <meta name="description" content="背景 WordPress から Jekyll に移行した時に記事の移行が面倒で放っておいた。 Hugo に移行することにしたから Jekyll の記事と WordPress の記事を Hugo にインポートすることになった。 つらい。 Hugo に合わせた最終的な形式 こんな感じに統一することを目指す。 記事のファイルの見通しをよくするためにディレクトリを分けて管理したかったので URL は各ファイルで指定する。 123456789 &#43;&#43;&#43;title = &#34;Jekyll の記事と WordPress の記事を Hugo にインポートする&#34;date = 2017-08-13T04:26:50&#43;09:00url = &#34;2017-08-import&#34;&#43;&#43;&#43;## 記事内容 つらつら 手順 実際に行ったインポート作業の内容はこちら。 Feature import article by 5000164 · Pull Request #2 · 5000164/blog WordPress の記事を Markdown 形式に変換する 最初は Jekyll に移行しようと思ってたのでこれを使いました。 benbalter/wordpress-to-jekyll-exporter: One-click WordPress plugin that converts all posts, pages, taxonomies, metadata, and settings to Markdown and YAML which can be dropped into Jekyll ファイル名を調整する なんか日付がたくさんついてたので年と月でディレクトリを分けてからファイル名をきれいにした。 12 brew install rename find . -name &#34;*.md&#34; | xargs rename &#39;s/\d\d\d\d-\d\d-\d\d-\d\d\d\d-\d\d-//&#39; Jekyll の記事の URL はファイル名に依存してたのでファイルの中に書き込む ファイル名をファイルの">
    <link href="http://blog.5000164.jp/2017-08-import/" rel="canonical">
    <meta property="og:title" content="Jekyll の記事と WordPress の記事を Hugo にインポートする | 5000164 is here">
    <meta property="og:description" content="背景 WordPress から Jekyll に移行した時に記事の移行が面倒で放っておいた。 Hugo に移行することにしたから Jekyll の記事と WordPress の記事を Hugo にインポートすることになった。 つらい。 Hugo に合わせた最終的な形式 こんな感じに統一することを目指す。 記事のファイルの見通しをよくするためにディレクトリを分けて管理したかったので URL は各ファイルで指定する。 123456789 &#43;&#43;&#43;title = &#34;Jekyll の記事と WordPress の記事を Hugo にインポートする&#34;date = 2017-08-13T04:26:50&#43;09:00url = &#34;2017-08-import&#34;&#43;&#43;&#43;## 記事内容 つらつら 手順 実際に行ったインポート作業の内容はこちら。 Feature import article by 5000164 · Pull Request #2 · 5000164/blog WordPress の記事を Markdown 形式に変換する 最初は Jekyll に移行しようと思ってたのでこれを使いました。 benbalter/wordpress-to-jekyll-exporter: One-click WordPress plugin that converts all posts, pages, taxonomies, metadata, and settings to Markdown and YAML which can be dropped into Jekyll ファイル名を調整する なんか日付がたくさんついてたので年と月でディレクトリを分けてからファイル名をきれいにした。 12 brew install rename find . -name &#34;*.md&#34; | xargs rename &#39;s/\d\d\d\d-\d\d-\d\d-\d\d\d\d-\d\d-//&#39; Jekyll の記事の URL はファイル名に依存してたのでファイルの中に書き込む ファイル名をファイルの">
    <meta property="og:url" content="http://blog.5000164.jp/2017-08-import/">
    <meta name="twitter:card" content="summary">
    <meta name="twitter:site" content="@5000164">
    <style type="text/css">/* 全体の設定 */
html {
    width: 100%;
    height: 100%;
    margin: 0;
    font-size: 62.5%; /* 1 em を 10 px にするため*/
    font-family: -apple-system, BlinkMacSystemFont, "Helvetica Neue", "ヒラギノ角ゴ ProN W3", "Hiragino Kaku Gothic ProN", sans-serif;
    font-kerning: normal; /* フォントのカーニングを常に有効にする */
    font-feature-settings: "palt"; /* 自動カーニングさせる */
    letter-spacing: 0.02rem; /* 字間を調整 */
    -webkit-font-smoothing: antialiased; /* フォントにアンチエイリアスをかける (少し細く見える) */
    -moz-osx-font-smoothing: grayscale; /* 同上 */
}

body {
    width: 100%;
    height: 100%;
    margin: 0;
    font-size: 1.8rem;
    line-height: 1.73;
    color: hsl(235, 10%, 30%);
    background-color: hsl(0, 100%, 100%);
}

/* スマホでは文字を大きくする */
@media (max-width: 640px) {
    html {
        font-size: 75%;
    }
}

header {
    width: 600px;
    margin: 60px auto 120px;
    letter-spacing: -0.2rem;
}

header > a {
    text-decoration: none;
}

footer {
    width: 600px;
    margin: 120px auto 60px;
    text-align: right;
    letter-spacing: -0.2rem;
}

a {
    color: hsl(235, 10%, 30%);
}

a:visited {
    color: hsl(235, 10%, 50%);
}

/* トップページの設定 */
.articles {
    width: 600px;
    list-style: none;
    margin: 0 auto 20px;
    padding: 0;
}

.articles > li {
    margin: 60px 0;
}

.articles > li > a {
    display: grid;
    grid-template-columns: auto 1fr;
    grid-gap: 2rem;
}

.articles > li > a > div:first-child {
    white-space: nowrap;
}

.articles > li > a > div:last-child {
    white-space: pre-wrap;
    word-break: break-all;
    word-wrap: break-word;
}

/* 記事ページの設定 */
.title {
    margin: 40px 0;
}

h1 {
    width: 600px;
    margin: 0 auto;
    font-size: 3rem;
    font-weight: bold;
}

.date {
    width: 600px;
    margin: 0 auto;
    text-align: right;
}

.content {
    margin: 40px 0;
}

.content p {
    width: 600px;
    margin: 40px auto;
}

.content p:first-child {
    margin-top: 0;
}

.content h2 + p {
    margin-top: 0;
}

.content p:last-child {
    margin-bottom: 0;
}

h2 {
    width: 600px;
    margin: 120px auto 20px;
    font-size: 2.4rem;
    font-weight: bold;
}

h2:first-child {
    margin-top: 0;
}

h2 + h2 {
    margin-top: 0;
}

h4 {
    width: 600px;
    margin: 10px auto 10px;
    font-size: 1.8rem;
    font-weight: normal;
    text-align: center;
}

.content ul {
    width: 580px;
    margin: auto;
    padding-left: 20px;
}

figure {
    width: 600px;
    margin: auto;
}

img {
    display: block;
    max-width: 600px;
    margin: 0 auto;
}

blockquote {
    width: 600px;
    margin: 20px auto;
}

blockquote > p {
    position: relative;
    width: 580px;
    padding-left: 20px;
}

blockquote > p::before {
    content: "";
    display: block;
    position: absolute;
    top: 0;
    left: 0;
    width: 4px;
    height: 100%;
    background: #e3e4e6;
    border-radius: 8px;
}

.highlight {
    margin: 40px 0;
    background-color: #272822;
}

.highlight > div {
    max-width: 100%;
    margin: 0 auto;
}

.highlight table {
    display: flex !important;
    justify-content: center;
    align-items: center;
}

.highlight tbody {
    max-width: 100%;
}
</style>
    <link href="/favicon.ico" rel="icon">
    <meta name="generator" content="Hugo 0.32.2" />
</head>
<body>
<header>
    <a href="http://blog.5000164.jp">5000164 is here</a>
</header>

<article>
    <div class="title">
        <div class="date">2017-08-13</div>
        <h1>Jekyll の記事と WordPress の記事を Hugo にインポートする</h1>
    </div>
    <div class="content">
        

<h2 id="背景">背景</h2>

<p>WordPress から Jekyll に移行した時に記事の移行が面倒で放っておいた。<br />
Hugo に移行することにしたから Jekyll の記事と WordPress の記事を Hugo にインポートすることになった。<br />
つらい。</p>

<h2 id="hugo-に合わせた最終的な形式">Hugo に合わせた最終的な形式</h2>

<p>こんな感じに統一することを目指す。<br />
記事のファイルの見通しをよくするためにディレクトリを分けて管理したかったので URL は各ファイルで指定する。</p>
<div class="highlight"><div style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4">
<table style=";border-spacing:0;padding:0;margin:0;border:0;width:100%;overflow:auto;display:block;"><tr><td style=";vertical-align:top;padding:0;margin:0;border:0;">
<pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-md" data-lang="md"><span style="color:#7c7c79;margin-right:0.4em;padding:00.4em00.4em;display:block;">1</span><span style="color:#7c7c79;margin-right:0.4em;padding:00.4em00.4em;display:block;">2</span><span style="color:#7c7c79;margin-right:0.4em;padding:00.4em00.4em;display:block;">3</span><span style="color:#7c7c79;margin-right:0.4em;padding:00.4em00.4em;display:block;">4</span><span style="color:#7c7c79;margin-right:0.4em;padding:00.4em00.4em;display:block;">5</span><span style="color:#7c7c79;margin-right:0.4em;padding:00.4em00.4em;display:block;">6</span><span style="color:#7c7c79;margin-right:0.4em;padding:00.4em00.4em;display:block;">7</span><span style="color:#7c7c79;margin-right:0.4em;padding:00.4em00.4em;display:block;">8</span><span style="color:#7c7c79;margin-right:0.4em;padding:00.4em00.4em;display:block;">9</span></code></pre></td>
<td style=";vertical-align:top;padding:0;margin:0;border:0;">
<pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-md" data-lang="md">+++<span style="color:#960050;background-color:#1e0010">
</span><span style="color:#960050;background-color:#1e0010"></span>title = &#34;Jekyll の記事と WordPress の記事を Hugo にインポートする&#34;<span style="color:#960050;background-color:#1e0010">
</span><span style="color:#960050;background-color:#1e0010"></span>date = 2017-08-13T04:26:50+09:00<span style="color:#960050;background-color:#1e0010">
</span><span style="color:#960050;background-color:#1e0010"></span>url = &#34;2017-08-import&#34;<span style="color:#960050;background-color:#1e0010">
</span><span style="color:#960050;background-color:#1e0010"></span>+++<span style="color:#960050;background-color:#1e0010">
</span><span style="color:#960050;background-color:#1e0010">
</span><span style="color:#960050;background-color:#1e0010"></span><span style="color:#75715e">##</span> 記事内容
<span style="color:#960050;background-color:#1e0010">
</span><span style="color:#960050;background-color:#1e0010"></span>つらつら</code></pre></td></tr></table>
</div>
</div>
<h2 id="手順">手順</h2>

<p>実際に行ったインポート作業の内容はこちら。<br />
<a href="https://github.com/5000164/blog/pull/2">Feature import article by 5000164 · Pull Request #2 · 5000164/blog</a></p>

<h2 id="wordpress-の記事を-markdown-形式に変換する">WordPress の記事を Markdown 形式に変換する</h2>

<p>最初は Jekyll に移行しようと思ってたのでこれを使いました。<br />
<a href="https://github.com/benbalter/wordpress-to-jekyll-exporter">benbalter/wordpress-to-jekyll-exporter: One-click WordPress plugin that converts all posts, pages, taxonomies, metadata, and settings to Markdown and YAML which can be dropped into Jekyll</a></p>

<h2 id="ファイル名を調整する">ファイル名を調整する</h2>

<p>なんか日付がたくさんついてたので年と月でディレクトリを分けてからファイル名をきれいにした。</p>
<div class="highlight"><div style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4">
<table style=";border-spacing:0;padding:0;margin:0;border:0;width:100%;overflow:auto;display:block;"><tr><td style=";vertical-align:top;padding:0;margin:0;border:0;">
<pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash"><span style="color:#7c7c79;margin-right:0.4em;padding:00.4em00.4em;display:block;">1</span><span style="color:#7c7c79;margin-right:0.4em;padding:00.4em00.4em;display:block;">2</span></code></pre></td>
<td style=";vertical-align:top;padding:0;margin:0;border:0;">
<pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash">brew install rename
find . -name <span style="color:#e6db74">&#34;*.md&#34;</span> | xargs rename <span style="color:#e6db74">&#39;s/\d\d\d\d-\d\d-\d\d-\d\d\d\d-\d\d-//&#39;</span></code></pre></td></tr></table>
</div>
</div>
<h2 id="jekyll-の記事の-url-はファイル名に依存してたのでファイルの中に書き込む">Jekyll の記事の URL はファイル名に依存してたのでファイルの中に書き込む</h2>

<p>ファイル名をファイルの中に書き込んでからあとで url に設定をするようにする。<br />
ついでにファイル名も調整する。</p>
<div class="highlight"><div style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4">
<table style=";border-spacing:0;padding:0;margin:0;border:0;width:100%;overflow:auto;display:block;"><tr><td style=";vertical-align:top;padding:0;margin:0;border:0;">
<pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash"><span style="color:#7c7c79;margin-right:0.4em;padding:00.4em00.4em;display:block;">1</span><span style="color:#7c7c79;margin-right:0.4em;padding:00.4em00.4em;display:block;">2</span><span style="color:#7c7c79;margin-right:0.4em;padding:00.4em00.4em;display:block;">3</span><span style="color:#7c7c79;margin-right:0.4em;padding:00.4em00.4em;display:block;">4</span></code></pre></td>
<td style=";vertical-align:top;padding:0;margin:0;border:0;">
<pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash"><span style="color:#66d9ef">for</span> i in <span style="color:#66d9ef">$(</span>find . -name <span style="color:#e6db74">&#34;*.markdown&#34;</span><span style="color:#66d9ef">)</span>; <span style="color:#66d9ef">do</span> echo <span style="color:#e6db74">${</span>i<span style="color:#e6db74">}</span> &gt; <span style="color:#e6db74">${</span>i<span style="color:#e6db74">}</span>.new; cat <span style="color:#e6db74">${</span>i<span style="color:#e6db74">}</span> &gt;&gt; <span style="color:#e6db74">${</span>i<span style="color:#e6db74">}</span>.new; <span style="color:#66d9ef">done</span>
find . -name <span style="color:#e6db74">&#34;*.markdown.new&#34;</span> | xargs rename <span style="color:#e6db74">&#39;s/.markdown.new/.md/&#39;</span>
find . -name <span style="color:#e6db74">&#34;*.markdown&#34;</span> | xargs rm -f
find . -name <span style="color:#e6db74">&#34;*.md&#34;</span> | xargs rename <span style="color:#e6db74">&#39;s/\d\d\d\d-\d\d-\d\d-//&#39;</span></code></pre></td></tr></table>
</div>
</div>
<h2 id="ひたすら正規表現で置換する">ひたすら正規表現で置換する</h2>

<p>あとはもう望む形になるようにひたすら正規表現で置換する。<br />
<code>title</code> と <code>date</code> は最初から入っているものをうまく使う。<br />
Jekyll の <code>date</code> の形式が違くてエラーになっていたので書式に気をつける。<br />
WordPress からエクスポートした記事には <code>permalink</code> が入っていたのでそれをうまく利用して <code>url</code> にする。<br />
Jekyll のファイルには先ほどファイルの中に埋め込んだファイル名をうまく使って <code>url</code> にする。<br />
画像のリンクとかもひたすら変換する。</p>

<h2 id="あとはなんかおかしいのを見つけたら手で直す">あとはなんかおかしいのを見つけたら手で直す</h2>

<p>WordPress からエクスポートしたものが変なふうになってたり、なぜか <code>date</code> が 2 個設定されている記事があったり、おかしいものがあったら見つけ次第手で直す。</p>

<h2 id="見た目おかしかったり壊れてるところがあったりするけどひとまず完了">見た目おかしかったり壊れてるところがあったりするけどひとまず完了</h2>

<p>なんとなく見られるようになればよい、という感じでやりました。</p>

    </div>
</article>
<footer>
    <div>菅原 浩</div>
    <div><a href="https://github.com/5000164/profile">About</a></div>
</footer>


<script>
window.ga=window.ga||function(){(ga.q=ga.q||[]).push(arguments)};ga.l=+new Date;
ga('create', 'UA-51024599-1', 'auto');
ga('send', 'pageview');
</script>
<script async src='//www.google-analytics.com/analytics.js'></script>


</body>
</html>

