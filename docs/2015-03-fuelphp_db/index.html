<!DOCTYPE html>
<html lang="ja">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <meta name="generator" content="Hugo 0.26" />
    <title>FuelPHP でデータを YAML 形式でインポート／エクスポートするタスク | 5000164 is here</title>
    <link rel="icon" href="/favicon.ico">
    <link rel="stylesheet" href="/css/main.css">
    <link rel="stylesheet" href="/css/monokai.css">
    <link rel="canonical" href="http://blog.5000164.jp/2015-03-fuelphp_db/">
</head>
<body>
<header>
    <a href="http://blog.5000164.jp">5000164 is here</a>
</header>

<article>
    <div>2015-03-19</div>
    <h1>FuelPHP でデータを YAML 形式でインポート／エクスポートするタスク</h1>
    

<h1 id="データを-yaml-で管理する">データを YAML で管理する</h1>

<p>DB のデータを YAML で管理すると楽です。<br />
テストデータの状態を保てるし、バージョン管理ができる。<br />
だからデータをインポート／エクスポートするタスクを作りました。<br />
動作を確認した環境は FuelPHP 1.7.2 と MySQL 5.6 です。<br />
<a href="https://gist.github.com/5000164/1276251388acda1033e4">FuelPHP でデータを YAML 形式でインポート／エクスポートするタスク</a></p>

<h1 id="注意点">注意点</h1>

<p>FuelPHP の DB 接続は PDO じゃなくて MySQLi じゃないと動きません。<br />
接続しているデータベースのテーブル一覧を取得したかったのだが、取得する方法がわからなかった。<br />
そういえば ORM のドキュメントに、プロパティをちゃんと設定しないと毎回アクセスして情報を取得するって書いてあったなと思い出して、core の DB クラスになんかないかなと眺めてたら list_tables というメソッドがあった。<br />
list_tables でテーブル一覧が取れるかなと思ったら動作せず、PDO はサポートしていないと表示された。<br />
なので MySQLi で接続して DB::list_tables() でテーブルの一覧を取得して利用しているが、PDO の場合のテーブル一覧の取得方法がわからないままなので MySQLi じゃないと動きません。</p>

<h1 id="テストデータを外部ファイルでバージョン管理って初めてやったけど便利">テストデータを外部ファイルでバージョン管理って初めてやったけど便利</h1>

<p>テストデータに再現性があって共有できると便利。</p>

<h1 id="結果">結果</h1>

<p>最初の方はインポート機能がめっちゃ便利。<br />
機能が実装されるにつれてエクスポート機能が欲しくなる。</p>

</article>
<footer>
    SUGAWARA Hiroshi
</footer>


<script>
window.ga=window.ga||function(){(ga.q=ga.q||[]).push(arguments)};ga.l=+new Date;
ga('create', 'UA-51024599-1', 'auto');
ga('send', 'pageview');
</script>
<script async src='//www.google-analytics.com/analytics.js'></script>


</body>
</html>

